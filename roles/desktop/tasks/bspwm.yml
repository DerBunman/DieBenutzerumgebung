# basic host setup
---
- name: "bspwm config"
  block:
  - name: "Mkdir {{ user.home }}/.config/bspwm"
    file:
      path: "{{ user.home }}/.config/bspwm"
      state: directory
      mode: 0700

  - name: "Generate {{ user.home }}/.config/bspwm/bspwmrc"
    template:
      src:  bspwmrc.j2
      dest: "{{ user.home }}/.config/bspwm/bspwmrc"
      mode: 0700

  - name: "Mkdir {{ user.home }}/.config/sxhkd"
    file:
      path: "{{ user.home }}/.config/sxhkd"
      state: directory
      mode: 0700

  - name: "Generate {{ user.home }}/.config/sxhkd/sxhkdrc"
    template:
      src:  sxhkdrc.j2
      dest: "{{ user.home }}/.config/sxhkd/sxhkdrc"
      mode: 0600

  - name: "Generate {{ user.home }}/.config/polybar/config_bspwm"
    template:
      src:  polybar/config.j2
      dest: "{{ user.home }}/.config/polybar/config_bspwm"
      mode: 0600
    vars:
      windowmanager: bspwm

  become_user: "{{ user.name }}"
